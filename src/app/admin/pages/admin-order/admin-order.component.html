<rr-shop-admin-menu></rr-shop-admin-menu>

<h2>Admin / zamówienie / {{ order?.data?.number }}</h2>

<div class="margin-bottom">
  <rr-shop-clickable-action (actionClick)="refresh()" label="'Odśwież'"></rr-shop-clickable-action>
</div>

<div class="margin-bottom">
  <div *ngIf="order?.adminCallState === AdminCallState.Request">Wczytywanie zamówienia...</div>
  <div *ngIf="order?.adminCallState === AdminCallState.Failure">
    Błąd podczas ładowania zamówienia
    <pre>{{ order?.errorDetails | json }}</pre>
  </div>
</div>

<div class="margin-bottom">
  <button (click)="setStatus(Status.PaymentWait)">Opłacono</button>
  <button (click)="setStatus(Status.PaymentCompleted)">Płatność zakończona</button>
  <button (click)="setStatus(Status.ReadyForPickup)">Gotowe do odbioru</button>
  <button (click)="setStatus(Status.Shipped)">Wysłano</button>
  <button (click)="setStatus(Status.Completed)">Zakończono</button>
  <button (click)="setStatus(Status.Canceled)">Anulowano</button>
</div>

<div class="margin-bottom">
  <div *ngIf="orderStatus?.adminCallState === AdminCallState.Request">Zmiana statusu</div>
  <div *ngIf="orderStatus?.adminCallState === AdminCallState.Failure">
    Błąd podczas zmiany statusu
    <pre>{{ orderStatus?.errorDetails | json }}</pre>
  </div>
</div>

<div class="margin-bottom">
  Aktualny status: <strong>{{ order?.data?.status }}</strong>
</div>

<div *ngIf="order?.data?.orderItems as orderItems" class="margin-bottom">
  <table>
    <tr *ngFor="let item of orderItems">
      <td>
        {{ item.name }}
      </td>
      <td>{{ item.quantity }}</td>
    </tr>
  </table>
</div>

<div *ngIf="order?.data as d" class="margin-bottom">
  <pre class="u-formatted-json">{{ d | json }}</pre>
</div>
